<!DOCTYPE html>
<html>
    <head>
        <title></title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
        <meta charset="utf-8">


        <!-- iPad/iPhone specific css below, add after your main css >
        <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />		
        <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />		
        -->
        <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->
        <link rel="stylesheet" media="screen" href="css/jquery.mobile-1.0.1.min.css" type="text/css" />
        <link rel="stylesheet" media="screen" href="css/iphone.css" type="text/css" />
        <script type="text/javascript" charset="utf-8" src="js/phonegap-1.4.1.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.0.1.min.js"></script>
        <script type="text/javascript">
            // If you want to prevent dragging, uncomment this section
            /*
            function preventBehavior(e) 
            { 
            e.preventDefault(); 
            };
            document.addEventListener("touchmove", preventBehavior, false);
            */

            /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
            see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
            for more details -jm */
            /*
            function handleOpenURL(url)
            {
            // TODO: do something with the url passed in.
            }
            */

            function onBodyLoad()
            {		
                document.addEventListener("deviceready", onDeviceReady, false);
            }

            /* When this function is called, PhoneGap has been initialized and is ready to roll */
            /* If you are supporting your own protocol, the var invokeString will contain any arguments to the app launch.
            see http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html
            for more details -jm */
            function onDeviceReady()
            {
                // do your thing!
                //navigator.notification.alert("PhoneGap is working")
            }

        </script>

    </head>
    <body onload="onBodyLoad()">

        <div data-role="page" data-theme="a">
            <div data-role="header">
                <h2 style="text-align:center">Good Night Sleep </h2>
            </div>
            <div data-role="content">
                <a href="#" id="wakeUp" data-role="button">Give me wake up times</a>
                <div id="wakeupTime"></div>
                <a href="#index"  data-role="button">Go Back</a>
            </div>
        </div>
   
        <!-- INFO -->
        <div data-role="page" data-theme="a" id="info">
            <div data-role="header">
                <h2 style="text-align:center">Good Night Sleep </h2>
            </div>
            <div data-role="content">
                On average a sleep cycle is about 1 hour 30 minutes long.<br/><br/>
                An average human being requires 5-6 sleep cycles to have a good night sleep and be alert during the day.
                <a href="#index" data-role="button">Back</a>
            </div>
        </div>

        <script type="text/javascript">
            $("#wakeUp").click(function(){ 
                // do your thing!
                var currentTime = new Date();
                wakeupEarly = new Date(currentTime);
                wakeupModerate = new Date(currentTime);
                wakeupLate = new Date(currentTime);
                
                wakeupEarly.setMinutes(currentTime.getMinutes() + 360);
                wakeupModerate.setMinutes(currentTime.getMinutes() + 450);
                wakeupLate.setMinutes(currentTime.getMinutes() + 540);
                
               earlyHours = wakeupEarly.getHours();
               earlyMinutes = wakeupEarly.getMinutes();
               if (earlyMinutes < 10){
                    earlyMinutes = "0" + earlyMinutes;
               }
                               
               moderateHours = wakeupModerate.getHours();
               moderateMinutes = wakeupModerate.getMinutes();
               if (moderateMinutes < 10){
                    moderateMinutes = "0" + moderateMinutes;
               }
                               
               lateHours = wakeupLate.getHours();
               lateMinutes = wakeupLate.getMinutes();
               if (lateMinutes < 10){
                    lateMinutes = "0" + lateMinutes;
               }
               
               var ampm = (earlyHours > 11 ? "PM" : "AM");
               earlyTime = earlyHours + ":" + earlyMinutes + " " + ampm;
               var ampm = (moderateHours > 11 ? "PM" : "AM");
               moderateTime = moderateHours + ":" + moderateMinutes + " " + ampm;
               var ampm = (lateHours > 11 ? "PM" : "AM");
               lateTime = lateHours + ":" + lateMinutes + " " + ampm;
                               
                var times = earlyTime + "<br/>" + moderateTime + "<br/>" + lateTime;
                               
                //var times = currentTime + "<br/>" + wakeupEarly + "<br/>" + wakeupModerate + "<br/>" + wakeupLate;
                $("#wakeupTime").html(times);
                 
            });
                
            $("#laterTime").click(function(){ 
                      var hour = $("#hour").val();
                      var hour_milli_sec = hour * 3600000;
                      var minute = $("#minute").val();
                      var minute_milli_sec = minute * 60000;
                      var d = new Date();
                      var n = d.getTime();
                      
                      var total_time = n + hour_milli_sec + minute_milli_sec;
                      var futureTime = new Date(total_time);
                      
                      alert(minute_milli_sec);
                      wakeupEarly = new Date(futureTime);
                      wakeupModerate = new Date(futureTime);
                      wakeupLate = new Date(futureTime);
                    
                      wakeupEarly.setMinutes(futureTime.getMinutes() - 360);
                      wakeupModerate.setMinutes(futureTime.getMinutes() - 450);
                      wakeupLate.setMinutes(futureTime.getMinutes() - 540);
                      
                      earlyHours = wakeupEarly.getHours();
                      earlyMinutes = wakeupEarly.getMinutes();
                      if (earlyMinutes < 10){
                      earlyMinutes = "0" + earlyMinutes;
                      }
                      
                      moderateHours = wakeupModerate.getHours();
                      moderateMinutes = wakeupModerate.getMinutes();
                      if (moderateMinutes < 10){
                      moderateMinutes = "0" + moderateMinutes;
                      }
                      
                      lateHours = wakeupLate.getHours();
                      lateMinutes = wakeupLate.getMinutes();
                      if (lateMinutes < 10){
                      lateMinutes = "0" + lateMinutes;
                      }
                      
                      var ampm = (earlyHours > 11 ? "PM" : "AM");
                      earlyTime = earlyHours + ":" + earlyMinutes + " " + ampm;
                      var ampm = (moderateHours > 11 ? "PM" : "AM");
                      moderateTime = moderateHours + ":" + moderateMinutes + " " + ampm;
                      var ampm = (lateHours > 11 ? "PM" : "AM");
                      lateTime = lateHours + ":" + lateMinutes + " " + ampm;
                      
                      var times = earlyTime + "<br/>" + moderateTime + "<br/>" + lateTime;
                                  $("#sleepDisplay").hide();
                      $("#wakeupTime2").html(times);
                      
            });
        </script>
    </body>
</html>
